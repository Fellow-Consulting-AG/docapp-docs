{
    "sourceFile": "docs/data-sources/couchdb.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1656582811777,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1656582811777,
            "name": "Commit-0",
            "content": "---\nid: couchdb\ntitle: CouchDB\n---\n\n# CouchDB\n\nInsight can connect to CouchDB databases to read and write data. CocuhDB uses basic auth for authentication , username and password for the database is required to create an CouchDB data source on Insight. For more info visit [CouchDB docs](https://docs.couchdb.org/en/stable/).\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/auth_couch.gif)\n\n</div>\n\n## Supported queries: \n\n- [Listing records](#listing-records)\n- [Retrieving a record](#retrieving-a-record)\n- [Creating a record](#creating-a-record)\n- [Updating a record](#updating-a-record)\n- [Deleting a record](#deleting-a-record)\n- [Find](#find)\n- [Retrieving a view](#retrieving-a-view)\n\n:::info\nNOTE: Record ID is same as document ID(\"_id\") .\n:::\n### Listing records \n\nThis query lists all the records in a database.\n\n#### Optional parameters: \n\n- **Include docs**\n- **Descending order**\n- **Limit**\n- **Skip**\n\n:::info\ndescending (boolean) – Return the documents in descending order by key. Default is false.\n\nlimit (number) – Limit the number of the returned documents to the specified number.\n\nskip (number) – Skip this number of records before starting to return the results. Default is 0.\n\ninclude_docs (boolean) – include_docs key is set to false by default , if true it returns the document data along with the default fields.\n\n:::\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/listing.png)\n\n</div>\n\n\nExample response from CouchDb: \n\n```json\n{\n    \"total_rows\": 3,\n    \"offset\": 0,\n    \"rows\": [\n        {\n            \"id\": \"23212104e60a71edb42ebc509f000dc2\",\n            \"key\": \"23212104e60a71edb42ebc509f000dc2\",\n            \"value\": {\n                \"rev\": \"1-0cc7f48876f15883394e5c139c628123\"\n            }\n        },\n        {\n            \"id\": \"23212104e60a71edb42ebc509f00216e\",\n            \"key\": \"23212104e60a71edb42ebc509f00216e\",\n            \"value\": {\n                \"rev\": \"1-b3c45696b10cb08221a335ff7cbd8b7a\"\n            }\n        },\n        {\n            \"id\": \"23212104e60a71edb42ebc509f00282a\",\n            \"key\": \"23212104e60a71edb42ebc509f00282a\",\n            \"value\": {\n                \"rev\": \"1-da5732beb913ecbded309321cac892d2\"\n            }\n        },\n    ]\n}\n```\n\n### Retrieving a record \n\n#### Required parameters: \n\n- **Record ID**\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/retrieving.png)\n\n</div>\n\n\nExample response from CouchDb: \n\n```json\n{\n    \"_id\": \"e33dc4e209689cb0400d095fc401a1e0\",\n    \"_rev\": \"1-a62af8e14451af88c150e7e718b7a0e8\",\n    \"0\": {\n        \"name\": \"test data\"\n    }\n}\n```\nThe returned JSON is the JSON of the document, including the document ID and revision number:\n\n\n### Creating a record\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/creating.png)\n\n</div>\n\n#### Example Records:\n\n```json\n  [{\"name\":\"tooljet\"}]\n```\n\nClick on the `run` button to run the query.\n\n:::info\nNOTE: Query must be saved before running.\n:::\n\nExample response from CouchDb:\n```json\n\n   {\n    \"ok\": true,\n    \"id\": \"23212104e60a71edb42ebc509f0049a2\",\n    \"rev\": \"1-b0a625abc4e21ee554737920156e911f\"\n}\n\n```\n\n### Updating a record\n\nYou can get the revision id  value, by sending a GET request to get the document details.\nYou get the document as JSON in the response. For each update to the document, the revision field \"_rev\" gets changed.\n\n#### Required parameters:\n- **Revision ID**\n- **Record ID**\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/updating.png)\n\n</div>\n\n#### Example body:\n\n```json\n  [{\"name\":\"tooljet\"}]\n```\n\n\nClick on the `run` button to run the query.\n\n:::info\nNOTE: Query must be saved before running.\n:::\n\nExample response from CouchDb:\n```json\n{\n    \"ok\": true,\n    \"id\": \"23212104e60a71edb42ebc509f0049a2\",\n    \"rev\": \"2-b0a625abc4e21ee554737920156e911f\"\n}\n```\n\n### Deleting a record\n\n#### Required parameters:\n- **Revision ID**\n- **Record ID**\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/deleting.png)\n\n</div>\n\n\nClick on the `run` button to run the query.\n\n\nExample response from CouchDb:\n\n```json\n{\n    \"ok\": true,\n    \"id\": \"rev_id=2-3d01e0e87139c57e9bd083e48ecde13d&record_id=e33dc4e209689cb0400d095fc401a1e0\",\n    \"rev\": \"1-2b99ef28c03e68ea70bb668ee55ffb7b\"\n}\n```\n\n### Find \n\nFind documents using a declarative JSON querying syntax.\n\n#### Required parameters:\n- **Selector**\n\n:::info\nNOTE:\nselector syntax: https://pouchdb.com/guides/mango-queries.html\n:::\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/find.png)\n\n</div>\n\n#### Example body:\n\n```json\n{\n    \"selector\": {\n        \"year\":  {\"$gte\": 2015}\n    },\n    \"fields\": [\"year\"]\n}\n```\n\n\nClick on the `run` button to run the query.\n\n:::info\nNOTE:\nselector (json) – JSON object describing criteria used to select documents. \n\nMore information : https://docs.couchdb.org/en/stable/api/database/find.html\n:::\n\nExample response from CouchDb:\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/find_response.png)\n\n</div>\n\n### Retrieving a view\n\nViews are the primary tool used for querying and reporting on CouchDB documents.\n\n#### Required parameters:\n- **View url**\n\nReference for view :https://docs.couchdb.org/en/3.2.0/ddocs/views/intro.html#what-is-a-view\n\n<div style={{textAlign: 'center'}}>\n\n![Insight - Data source - CouchDb](/img/datasource-reference/couchdb/get_view.png)\n\n</div>\n\n#### Optional parameters: \n\n- **Start key**\n- **End key**\n- **Limit**\n- **Skip**\n\nClick on the `run` button to run the query.\n\n:::info\nstartkey (json) – Return records starting with the specified key.\n\nendkey (json) – Stop returning records when the specified key is reached.\n\nlimit (number) – Limit the number of the returned documents to the specified number.\n\nskip (number) – Skip this number of records before starting to return the results. Default is 0.\n:::\n\nExample response from CouchDb:\n```json\n{\n    \"total_rows\": 4,\n    \"offset\": 0,\n    \"rows\": [\n        {\n            \"id\": \"23212104e60a71edb42ebc509f000dc2\",\n            \"key\": \"23212104e60a71edb42ebc509f000dc2\",\n            \"value\": {\n                \"rev\": \"1-0cc7f48876f15883394e5c139c628123\"\n            }\n        },\n        {\n            \"id\": \"23212104e60a71edb42ebc509f00216e\",\n            \"key\": \"23212104e60a71edb42ebc509f00216e\",\n            \"value\": {\n                \"rev\": \"1-b3c45696b10cb08221a335ff7cbd8b7a\"\n            }\n        },\n        {\n            \"id\": \"23212104e60a71edb42ebc509f00282a\",\n            \"key\": \"23212104e60a71edb42ebc509f00282a\",\n            \"value\": {\n                \"rev\": \"1-da5732beb913ecbded309321cac892d2\"\n            }\n        },\n        {\n            \"id\": \"23212104e60a71edb42ebc509f002cbd\",\n            \"key\": \"23212104e60a71edb42ebc509f002cbd\",\n            \"value\": {\n                \"rev\": \"1-ca5bb3c0767eb42ea6c33eee3d395b59\"\n            }\n        \n        }\n    ]\n}\n```"
        }
    ]
}