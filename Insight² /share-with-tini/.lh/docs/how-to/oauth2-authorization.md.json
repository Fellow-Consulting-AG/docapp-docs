{
    "sourceFile": "docs/how-to/oauth2-authorization.md",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1656582811801,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1656582811801,
            "name": "Commit-0",
            "content": "---\nid: oauth2-authorization\ntitle: REST API authentication using OAuth 2.0\n---\n\n# REST API authentication using OAuth 2.0\n\nInsight’s REST API data source supports OAuth 2.0 as the authentication type. In this guide, we’ll learn how to use **Google OAuth2 API** to delegate authorization and authentication for your Insight Application.\n\nBefore setting up the REST API data source in Insight, we need to configure the **Google Cloud Platform** to gather the API keys required for the authorization access.\n\n## Setting up Google Cloud Platform\n\nGoogle Cloud Platform provides access to more than 350 APIs and Services that can allow us to access data from our Google account and its services. Let's create an OAuth application that can be given permission to use our Google profile data such as Name and Profile picture.\n\n1. Sign in to your [Google Cloud](https://cloud.google.com/) account, and from the console create a New Project.\n2. Navigate to the **APIs and Services**, and then open the **OAuth consent screen** section from the left sidebar.\n3. Enter the Application details and select the appropriate scopes for your application. We will select the profile and the email scopes. \n4. Once you have created the OAuth consent screen, Create new credentials for the **OAuth client ID** from the **Credentials** section in the left sidebar.\n5. Select the application type, enter the application name, and then add the following URIs under Authorised Redirect URIs:\n    1. `https://app.tooljet.com/oauth2/authorize` (if you’re using Insight cloud)\n    2. `http://localhost:8082/oauth2/authorize` (if you’re using Insight locally)\n6. Now save and then you’ll get the **Client ID and Client secret** for your application.\n\n<img class=\"screenshot-full\" src=\"/img/how-to/oauth2-authorization/gcp.png\" alt=\"Insight - How To - REST API authentication using OAuth 2.0\" height=\"420\"/>\n\n## Configuring Insight Application with Google's OAuth 2.0 API\n\nLet's follow the steps to authorize Insight to access your Google profile data:\n\n- Select **add data source** from the left sidebar, and choose **REST API** from the dialog window.\n\n:::info\nYou can rename the data source by clicking on its default name `REST API`\n:::\n\n- In the **URL** field, enter the base URL `https://www.googleapis.com/oauth2/v1/userinfo`; the base URL specifies the network address of the API service.\n- Select authentication type as `OAuth 2.0`\n- Keep the default values for **Grant Type**, **Add Access Token To**, and **Header Prefix** i.e. `Authorization Code`, `Request Header`, and `Bearer` respectively.\n- Enter **Access Token URL**: `https://oauth2.googleapis.com/token`; this token allows users to verify their identity, and in return, receive a unique access token.\n- Enter the **Client ID** and **Client Secret** that we generated from the [Google Console](http://console.developers.google.com/).\n- In the **Scope** field, enter `https://www.googleapis.com/auth/userinfo.profile`; Scope is a mechanism in OAuth 2.0 to limit an application's access to a user's account. Check the scopes available for [Google OAuth2 API here](https://developers.google.com/identity/protocols/oauth2/scopes#oauth2).\n- Enter **Authorization URL:** `https://accounts.google.com/o/oauth2/v2/auth`; the Authorization URL requests authorization from the user and redirects to retrieve an authorization code from identity server.\n- Create three **Custom Authentication Parameters:**\n\n    | params      | description |\n    | ----------- | ----------- |\n    | response_type | code ( `code` refers to the Authorization Code) |\n    | client_id | **Client ID**  |\n    | redirect_uri | `http://localhost:8082/oauth2/authorize` if using Insight locally or enter this `https://app.tooljet.com/oauth2/authorize` if using Insight Cloud.  |\n    \n- Keep the default selection for **Client Authentication** and **Save** the data source.\n\n<img class=\"screenshot-full\" src=\"/img/how-to/oauth2-authorization/restapi.png\" alt=\"Insight - How To - REST API authentication using OAuth 2.0\"/>\n\n## Create the query\n\nLet’s create a query to make a `GET` request to the URL, it will pop a new window and ask the user to authenticate against the API.\n\n- Add a new query and select the REST API datasource from the dropdown\n- In the **Method** dropdown select `GET` and in advance tab toggle `run query on page load?`\n- **Save** and **Run** the query.\n\n<img class=\"screenshot-full\" src=\"/img/how-to/oauth2-authorization/oauth.gif\" alt=\"Insight - How To - REST API authentication using OAuth 2.0\"/>\n\nA new window will pop for authentication and once auth is successful, you can run the query again to get the user data like Name and Profile Picture."
        }
    ]
}