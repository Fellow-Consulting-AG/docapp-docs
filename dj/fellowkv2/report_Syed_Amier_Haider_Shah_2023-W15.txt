Syed Amier Haider Shah: 5 commits for week 2023-W15
Author image: https://avatars.githubusercontent.com/u/2101825?v=4
- 01ff25da7171c864f3efaa221ef8d0959794724c: Merge pull request #879 from Fellow-Consulting-AG/dev

lookup
Code changes:
@@ -362,8 +362,8 @@ def get_label_train_data(org_id):
             and ccd.is_deleted = false;    
     """
 
-    result = dbh.execute_scalar_query(db, sql)
-    result = json.dumps([r._asdict() for r in result])
+    result = dbh.execute_query(db, sql)
+    result = json.dumps(result)
     result = json.loads(result)
 
     docs_dict = {r["doc_id"]: r for r in result}
@@ -386,8 +386,8 @@ def get_label_train_data(org_id):
     for rec, val in docs_dict.items():
         val["tag_ids"] = []
 
-    tags_result = dbh.execute_scalar_query(db, sql_tags)
-    tags_result = json.dumps([r._asdict() for r in tags_result])
+    tags_result = dbh.execute_query(db, sql_tags)
+    tags_result = json.dumps(tags_result)
     tags_result = json.loads(tags_result)
 
     for rec in tags_result:
- 7afd8c82ed910c12506e4cb07e7b35d59b0a3b28: Merge pull request #867 from Fellow-Consulting-AG/dev

upgrades
- 5acce29b2f531d7ccd7603dd4c7549027085b2ad: Merge branch 'stage' into dev
Code changes:
@@ -1 +1 @@
-2.0.559
\ No newline at end of file
+2.0.559
- 0ec7085bb38e2a3bfcd682bfe45e4d54c0d6d2e4: Merge pull request #866 from Fellow-Consulting-AG/CLOU-5092

Clou 5092
Code changes:
@@ -6,9 +6,9 @@ def execute_query(db, query):
         query = query.replace("\n", "")
     except:
         pass
-    with db.engine.begin() as conn:
+    with db.engine.connect() as conn:
         results = conn.execute(text(query))
-        results_list = [dict(r) for r in results]
+        results_list = [r._asdict() for r in results]
         return results_list
 
 
@@ -17,7 +17,7 @@ def execute_scalar_query(db, query):
         query = query.replace("\n", "")
     except:
         pass
-    with db.engine.begin() as conn:
+    with db.engine.connect() as conn:
         return conn.execute(text(query))
 
 
- 2e23a7ab62a02955b41800c4e45880b6455af25f: fix for dict
Code changes:
@@ -8,7 +8,7 @@ def execute_query(db, query):
         pass
     with db.engine.connect() as conn:
         results = conn.execute(text(query))
-        results_list = [dict(r) for r in results]
+        results_list = [r._asdict() for r in results]
         return results_list
 
 
