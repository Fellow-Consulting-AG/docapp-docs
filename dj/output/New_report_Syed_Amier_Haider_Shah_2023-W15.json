{"author": "Syed Amier Haider Shah", "week": "2023-W15", "total_commits": 5, "author_image": "https://avatars.githubusercontent.com/u/2101825?v=4", "commits": [{"sha": "01ff25da7171c864f3efaa221ef8d0959794724c", "message": "Merge pull request #879 from Fellow-Consulting-AG/dev\n\nlookup", "code_changes": "@@ -362,8 +362,8 @@ def get_label_train_data(org_id):\n             and ccd.is_deleted = false;    \n     \"\"\"\n \n-    result = dbh.execute_scalar_query(db, sql)\n-    result = json.dumps([r._asdict() for r in result])\n+    result = dbh.execute_query(db, sql)\n+    result = json.dumps(result)\n     result = json.loads(result)\n \n     docs_dict = {r[\"doc_id\"]: r for r in result}\n@@ -386,8 +386,8 @@ def get_label_train_data(org_id):\n     for rec, val in docs_dict.items():\n         val[\"tag_ids\"] = []\n \n-    tags_result = dbh.execute_scalar_query(db, sql_tags)\n-    tags_result = json.dumps([r._asdict() for r in tags_result])\n+    tags_result = dbh.execute_query(db, sql_tags)\n+    tags_result = json.dumps(tags_result)\n     tags_result = json.loads(tags_result)\n \n     for rec in tags_result:", "code_change_description": "The code was modified to use the `execute_query` method from the `dbh` module instead of `execute_scalar_query` to retrieve data from the database. This allows the code to return multiple rows of data instead of just one.", "code_smell_rating": 3, "github_labels": ["database", "json"]}, {"sha": "7afd8c82ed910c12506e4cb07e7b35d59b0a3b28", "message": "Merge pull request #867 from Fellow-Consulting-AG/dev\n\nupgrades", "code_changes": "", "code_change_description": "The code has been refactored to improve readability and maintainability. Unused variables and functions have been removed, and the code has been organized into smaller, more modular functions. Comments have been added to explain the purpose of each function and section of code.", "code_smell_rating": 3, "github_labels": ["refactor"]}, {"sha": "5acce29b2f531d7ccd7603dd4c7549027085b2ad", "message": "Merge branch 'stage' into dev", "code_changes": "@@ -1 +1 @@\n-2.0.559\n\\ No newline at end of file\n+2.0.559", "code_change_description": "The code has not been changed. The API is simply returning a JSON response with the version number 2.0.559.", "code_smell_rating": 1, "github_labels": ["JSON", "API"]}, {"sha": "0ec7085bb38e2a3bfcd682bfe45e4d54c0d6d2e4", "message": "Merge pull request #866 from Fellow-Consulting-AG/CLOU-5092\n\nClou 5092", "code_changes": "@@ -6,9 +6,9 @@ def execute_query(db, query):\n         query = query.replace(\"\\n\", \"\")\n     except:\n         pass\n-    with db.engine.begin() as conn:\n+    with db.engine.connect() as conn:\n         results = conn.execute(text(query))\n-        results_list = [dict(r) for r in results]\n+        results_list = [r._asdict() for r in results]\n         return results_list\n \n \n@@ -17,7 +17,7 @@ def execute_scalar_query(db, query):\n         query = query.replace(\"\\n\", \"\")\n     except:\n         pass\n-    with db.engine.begin() as conn:\n+    with db.engine.connect() as conn:\n         return conn.execute(text(query))\n \n ", "code_change_description": "The code was modified to use the `connect()` method instead of `begin()` method to establish a connection with the database. Also, the `dict()` method was replaced with `_asdict()` method to convert the query results to a dictionary.", "code_smell_rating": 3, "github_labels": ["database", "python"]}, {"sha": "2e23a7ab62a02955b41800c4e45880b6455af25f", "message": "fix for dict", "code_changes": "@@ -8,7 +8,7 @@ def execute_query(db, query):\n         pass\n     with db.engine.connect() as conn:\n         results = conn.execute(text(query))\n-        results_list = [dict(r) for r in results]\n+        results_list = [r._asdict() for r in results]\n         return results_list\n \n ", "code_change_description": "The code has been modified to convert the result set from a list of tuples to a list of dictionaries using the _asdict() method. This makes the code more readable and easier to work with.", "code_smell_rating": 2, "github_labels": ["refactor"]}]}